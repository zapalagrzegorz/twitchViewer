"use strict";var engine={users:["bobross","sandexperiment","timsww","soushibo","streamerhouse","Bananasaurus_Rex","freecodecamp","polskiestrumyki","ESL_SC2","cretetion","storbeck","habathcx","RobotCaleb","noobs2ninjas","123","kubon"],getUsersData:function(a){function b(){if("string"==typeof a&&!/^[a-zA-Z0-9\s][a-zA-Z0-9_\s]*$/.test(a))return $("#searchValue").val(""),$("#searchValue").attr("placeholder","Invalid query"),!0}function c(a){$(".user-online").hide(),$(".user-offline").hide(),$(".user-unavailable").hide(),$("#searchLoading").show(),a=k(a);var b=a.toLowerCase();l.users.forEach(function(a){var c=a.toLowerCase();if(b==c)return $("#"+a).show(),void $("#searchLoading").hide()});var c=[],d=e("streams",a);c.push(d),$.when.apply($,c).done(f)}function d(){for(var a=[],b=0,c=l.users.length;b<c;b++){var d=e("streams",l.users[b]);a.push(d)}$.when.apply($,a).done(f)}function e(a,b){return $.ajax({type:"get",url:"https://wind-bow.glitch.me/twitch-api/"+a+"/"+b,headers:{Accept:"application/vnd.twitchtv.v3+json"}})}function f(){var b=arguments,c=[],d=[],f=!1;3==b.length&&(b=[],b.push(arguments),f=!0,a=k(a));for(var h in b)null==b[h][0].stream&&f===!0?c.push(e("users",a)):null==b[h][0].stream?c.push(e("users",l.users[h])):d.push(b[h][0].stream);i("streaming",d),0!=c.length&&$.when.apply($,c).done(g)}function g(){var a=[],b=[],c=arguments;3==c.length&&(c=[],c.push(arguments));for(var d in c)if(c[d][0].hasOwnProperty("error"))j(c[d][0]);else{var f={};f.bio=null==c[d][0].bio?"No bio available":c[d][0].bio.substring(0,140).concat("..."),f.created_at=c[d][0].created_at,f.logo=null==c[d][0].logo?"img/Glitch.png":c[d][0].logo,f.display_name=c[d][0].display_name,a.push(f),b.push(e("channels",c[d][0].name))}h(b,a)}function h(a,b){$.when.apply($,a).done(function(){var a=arguments;3==a.length&&(a=[],a.push(arguments));for(var c in a)b[c].profile_banner=null==a[c][0].video_banner?"img/profileLarge.png":a[c][0].video_banner,b[c].followers=a[c][0].followers,b[c].status=null==a[c][0].status?"no status":a[c][0].status,b[c].status.length>44&&(b[c].status=a[c][0].status.substring(0,44).concat("..."));i("nostreaming",b),$("header").show(),$("main").show(),$("#mainLoading").hide()})}function i(a,b){for(var c in b){var d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0;if("streaming"==a?(d=b[c].preview.large,e=b[c].game,f=b[c].channel.name,g=b[c].channel.logo,h=b[c].channel.followers,i=b[c].created_at.substring(0,10),j='<article class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 channel user-online" id="'+f+'"><div class="shadows"><div class="channelPreview"><a href="https://www.twitch.tv/'+f+'" target="_blank"><i class="fa fa-3x fa-play icon-play" aria-hidden="true"></i></a><div class="darken">'):"nostreaming"==a&&(d=b[c].profile_banner,e=b[c].display_name,f=b[c].name,g=b[c].logo,h=b[c].followers,i=b[c].created_at,j='<article class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 channel user-offline" id="'+f+'"><div class="shadows"><div class="channelPreview"><div>'),j+='<img class="img" src="'+d+'"></div></div><div class="channelDescription"><h3><a href="https://www.twitch.tv/'+e+'" target="_blank">'+e+"</a></h3>","streaming"==a?j+='<div class="row"><div class="col-10"><h4><a href="https://www.twitch.tv/'+b[c].channel.name+'" target="_blank">'+b[c].channel.status+'</a></h4></div><div class="col-2" style="text-align: center"><i class="fa fa-2x fa-user-circle" aria-hidden="true"></i><p><span id="#online">'+b[c].viewers+"</span> online</p></div></div>":"nostreaming"==a&&(j+='<div class="row"><div class="col-12"><p class="user-bio">'+b[c].bio+"</p></div></div>"),j+='<div class="row"><div class="col-2" style="padding-right:0;"><a href="https://www.twitch.tv/'+f+'" target="_blank"><img class="img" src="'+g+'"></a></div><div class="col-10" id="lastStatus'+e+'"><p>followers: '+h+"</p><p>Launched: "+i+"</p></div></div></div></div></article>",$("#streamContent").append(j),"nostreaming"==a){var k="<p>Last status: "+b[c].status+"</p>";$("#lastStatus"+e).prepend(k)}}$("#searchLoading").hide()}function j(a){var b='<article class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 channel user-unavailable"><div class="shadows"><div class="channelPreview"><img class="img" src="img/nostream.gif"></div><div class="channelDescription"><h3>'+a.message+" or does not exist</h3></div></div></article>";$("#streamContent").append(b)}function k(a){return a.indexOf(" ")!=-1?a.replace(/\s/g,"_"):a}var l=this;""===a||b(a)||("string"==typeof a?c(a):d())}};$().ready(function(){function a(){function a(){var a=$("#searchValue").val();engine.getUsersData(a)}function b(b){13===b.keyCode&&(b.preventDefault(),a())}$("#searchLoading").hide(),$(".nav-item").click(function(a){$(".navbar li.active").removeClass("active");var b=$(this);b.hasClass("active")||b.addClass("active"),a.preventDefault()}),$("#all").click(function(a){a.preventDefault(),$(".user-online").show(),$(".user-offline").show(),$(".user-unavailable").show()}),$("#online").click(function(a){a.preventDefault(),$(".user-offline").hide(),$(".user-unavailable").hide(),$(".user-online").show()}),$("#offline").click(function(a){a.preventDefault(),$(".user-online").hide(),$(".user-unavailable").hide(),$(".user-offline").show()}),$(document).bind("keypress",b),$("#searchUser").click(function(b){b.preventDefault(),a()})}a(),engine.getUsersData()});
//# sourceMappingURL=main.js.map